// Powered by ialdabaoth and sarbian's ModuleManager

/// =================================================== U ===========================================================


	
@PART[engine_??UA]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	PLUME
    {
        name = Hypergolic-Lower            //pre-fabbed plume you want
        transformName = thrustTransform //which transform to attach the plume
        localRotation = 0,0,0           //Optional - Any rotation needed
        localPosition = 0,0,0           //Any offset needed
        fixedScale = 1                  //Size adjustment to resize to engine
        energy = 1                      //Adjust length of plume
        speed = 1                       //Adjust speed to fit resize, 
                                        //generally close to 1:1 with scale.
    }
    @MODULE[ModuleEngines*]
    {
        @name = ModuleEnginesFX
        %powerEffectName = Hypergolic-Lower
    }
}

@PART[engine_??UV]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	PLUME
    {
        name = Hypergolic-Upper          //pre-fabbed plume you want
        transformName = thrustTransform //which transform to attach the plume
        localRotation = 0,0,0           //Optional - Any rotation needed
        localPosition = 0,0,0           //Any offset needed
        fixedScale = 1                  //Size adjustment to resize to engine
        energy = 1                      //Adjust length of plume
        speed = 1                       //Adjust speed to fit resize, 
                                        //generally close to 1:1 with scale.
    }
    @MODULE[ModuleEngines*]
    {
        @name = ModuleEnginesFX
        %powerEffectName = Hypergolic-Upper
    }
}

@PART[engine_05UA]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Hypergolic-Lower]
    {
        @localPosition = 0,0,0.55
		%plumePosition = 0,0,0.1
        @fixedScale = 0.45
    }
	
}

@PART[engine_05UV]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Hypergolic-Upper]
    {
        @localPosition = 0,0,0.65
		%plumePosition = 0,0,0.4
        @fixedScale = 0.6
    }
}

/////////////////////////////////////// size 1
@PART[engine_10UA]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Hypergolic-Lower]
    {
        @localPosition = 0,0,1.3
		%plumePosition = 0,0,0.8
        @fixedScale = 1
    }
}

@PART[engine_10UV]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Hypergolic-Upper]
    {
        @localPosition = 0,0,1.3
		%plumePosition = 0,0,0.8
        @fixedScale = 1
    }
}


/////////////////////////////////////// size 1.5
@PART[engine_15UA]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Hypergolic-Lower]
    {
        @localPosition = 0,0,0.2
		%plumePosition = 0,0,0
        @fixedScale = 1
    }
}

@PART[engine_15UV]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Hypergolic-Upper]
    {
        @localPosition = 0,0,0.2
		%plumePosition = 0,0,0.0
        @fixedScale = 1.2
    }
}

/////////////////////////////////////// size 2
@PART[engine_20UA]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Hypergolic-Lower]
    {
        @localPosition = 0,0,2.2
		%plumePosition = 0,0,1
        @fixedScale = 2
    }
}

@PART[engine_20UV]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	//TODO: remove previous effects, as they are too visible
	@PLUME[Hypergolic-Upper]
    {
        %flarePosition = 0,0,0.2
    }
}

/////////////////////////////////////// size 3
@PART[engine_30UA]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Hypergolic-Lower]
    {
        %flarePosition = 0,0,0.2
		%plumePosition = 0,0,-0.1
        @fixedScale = 1.4
    }
}

@PART[engine_30UV]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	//TODO: remove previous effects, as they are too visible
	@PLUME[Hypergolic-Upper]
    {
        @localPosition = 0,0,0.1
		%plumePosition = 0,0,-0.2
        @fixedScale = 1.8
    }
}

/////////////////////////////////////// size 4
@PART[engine_40UA]:FOR[SpaceRace]:NEEDS[RealPlume]
{
}

@PART[engine_40UV]:FOR[SpaceRace]:NEEDS[RealPlume]
{
}



/// =================================================== K =======================================================================================================


@PART[engine_??KA]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	PLUME
    {
        name = Kerolox-Lower            //pre-fabbed plume you want
        transformName = thrustTransform //which transform to attach the plume
        localRotation = 0,0,0           //Optional - Any rotation needed
        localPosition = 0,0,0           //Any offset needed
        fixedScale = 1                  //Size adjustment to resize to engine
        energy = 1                      //Adjust length of plume
        speed = 1                       //Adjust speed to fit resize, 
                                        //generally close to 1:1 with scale.
    }
    @MODULE[ModuleEngines*]
    {
        @name = ModuleEnginesFX
        %powerEffectName = Kerolox-Lower
    }
}

@PART[engine_??KV]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	PLUME
    {
        name = Kerolox-Upper            //pre-fabbed plume you want
        transformName = thrustTransform //which transform to attach the plume
        localRotation = 0,0,0           //Optional - Any rotation needed
        localPosition = 0,0,0           //Any offset needed
        fixedScale = 1                  //Size adjustment to resize to engine
        energy = 1                      //Adjust length of plume
        speed = 1                       //Adjust speed to fit resize, 
                                        //generally close to 1:1 with scale.
    }
    @MODULE[ModuleEngines*]
    {
        @name = ModuleEnginesFX
        %powerEffectName = Kerolox-Upper
    }
}

@PART[engine_05KA]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Kerolox-Lower]
    {
		@localPosition = 0,0,0.2
		flarePosition = 0,0,0.3
		plumePosition = 0,0,0.2
        @fixedScale = 0.3
    }
}

@PART[engine_05KV]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Kerolox-Upper]
    {
        @localPosition = 0,0,0.15
        @fixedScale = 0.15
        @energy = 1.5
        @speed = 0.6
    }
}

/////////////////////////////////////// size 1
@PART[engine_10KA]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Kerolox-Lower]
    {
		@localPosition = 0,0,0.4
        @fixedScale = 0.5
    }
}

@PART[engine_10KV]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Kerolox-Upper]
    {
		@localPosition = 0,0,0.9
        @fixedScale = 0.5
    }
}


/////////////////////////////////////// size 1.5
@PART[engine_15KA]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Kerolox-Lower]
    {
        @localPosition = 0,0,-0.05
		@fixedScale = 0.35
        @energy = 0.8
	}
}

@PART[engine_15KV]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Kerolox-Upper]
    {
		@localPosition = 0,0,-0.05
        @fixedScale = 0.45
    }
}

/////////////////////////////////////// size 2
@PART[engine_20KA]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Kerolox-Lower]
	{
		@localPosition = 0,0,1.3
		@fixedScale = 1.2
		@energy = 1.2
	}
}

@PART[engine_20KV]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Kerolox-Upper]
	{
		@localPosition = 0,0,1
		@fixedScale = 0.9
		@energy = 1.2
	}
}

/////////////////////////////////////// size 3
@PART[engine_30KA]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Kerolox-Lower]
	{
		@localPosition = 0,0,0.5
		@fixedScale = 1.2
	}
}

@PART[engine_30KV]:FOR[SpaceRace]:NEEDS[RealPlume]
{
}

/////////////////////////////////////// size 4
@PART[engine_40KA]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Kerolox-Lower]
	{
		@localPosition = 0,0,1.8
		@fixedScale = 1.5
	}
	MODULE
	{
		name = TestConfigNode
	}
	@EFFECTS
	{
		!running_full {}
		!running_four {}
	}
    @MODULE[ModuleEngines*]
    {
		!runningEffectName = DELETE
    }
}

@PART[engine_40KV]:FOR[SpaceRace]:NEEDS[RealPlume]
{
}


/// =================================================== H ================================================================================

// @PART[engine_??HA]:FOR[SpaceRace]:NEEDS[RealPlume]:HAS[PLUME]
// {
	// @PLUME
    // {
       // @name = Hydrolox-Lower
	// }
	// @MODULE[ModuleEngines*]
    // {
        // %powerEffectName = Hydrolox-Lower
    // }
// }

// @PART[engine_??HV]:FOR[SpaceRace]:NEEDS[RealPlume]:HAS[PLUME]
// {
	// @PLUME
    // {
       // @name = Hydrolox-Upper
	// }
	// @MODULE[ModuleEngines*]
    // {
        // %powerEffectName = Hydrolox-Upper
    // }
// }

@PART[engine_??HA]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	PLUME
    {
        name = Hydrolox-Lower            //pre-fabbed plume you want
        transformName = thrustTransform //which transform to attach the plume
        localRotation = 0,0,0           //Optional - Any rotation needed
        localPosition = 0,0,0           //Any offset needed
        fixedScale = 1                  //Size adjustment to resize to engine
        energy = 1                      //Adjust length of plume
        speed = 1                       //Adjust speed to fit resize, 
                                        //generally close to 1:1 with scale.
    }
    @MODULE[ModuleEngines*]
    {
        @name = ModuleEnginesFX
        %powerEffectName = Hydrolox-Lower
    }
}

@PART[engine_??HV]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	PLUME
    {
        name = Hydrolox-Upper            //pre-fabbed plume you want
        transformName = thrustTransform //which transform to attach the plume
        localRotation = 0,0,0           //Optional - Any rotation needed
        localPosition = 0,0,0           //Any offset needed
        fixedScale = 1                  //Size adjustment to resize to engine
        energy = 1                      //Adjust length of plume
        speed = 1                       //Adjust speed to fit resize, 
                                        //generally close to 1:1 with scale.
    }
    @MODULE[ModuleEngines*]
    {
        @name = ModuleEnginesFX
        %powerEffectName = Hydrolox-Upper
    }
}


@PART[engine_05HV]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Hydrolox-Upper]
	{
        @localPosition = 0,0,0.6
        @fixedScale = 0.3
    }
}

/////////////////////////////////////// size 1
@PART[engine_10HA]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Hydrolox-Lower]
	{
		@localPosition = 0,0,1.1
		@fixedScale = 1
		@speed = 1.2
	}
}

@PART[engine_10HV]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Hydrolox-Upper]
	{
        @localPosition = 0,0,0.7
        @fixedScale = 0.8
        @speed = 1
    }
}


/////////////////////////////////////// size 1.5
@PART[engine_15HA]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Hydrolox-Lower]
	{
		@localPosition = 0,0,0.85
		@fixedScale = 1.3
	}
}

@PART[engine_15HV]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Hydrolox-Upper]
	{
		@localPosition = 0,0,0.45
		@fixedScale = 0.8
	}
}

/////////////////////////////////////// size 2
@PART[engine_20HA]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Hydrolox-Lower]
	{
		@localPosition = 0,0,1.1
		@fixedScale = 2.2
	}
}

@PART[engine_20HV]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Hydrolox-Upper]
	{
		@localPosition = 0,0,1
		@fixedScale = 1
	}
}

/////////////////////////////////////// size 3
@PART[engine_30HA]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Hydrolox-Lower]
	{
		@localPosition = 0,0,1.5
		@fixedScale = 1
	}
}

@PART[engine_30HV]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Hydrolox-Upper]
	{
		@localPosition = 0,0,0.8
		@fixedScale = 1
	}
}

/////////////////////////////////////// size 4
@PART[engine_40HA]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Hydrolox-Lower]
	{
		@localPosition = 0,0,1.7
		@fixedScale = 1.7
	}
	//REMOVE base running effect
	MODULE
	{
		name = TestConfigNode
	}
    @MODULE[ModuleEngines*]:HAS[#engineID[AllEngines]]
    {
		!runningEffectName = DELETE
    }
	@EFFECTS
	{
		!running_full {}
		!running_four {}
	}
}

// @PART[engine_40HA]:FINAL:NEEDS[RealPlume]
// {
	// //REMOVE base running effect
	// @EFFECTS[*]
	// {
		// !running_full = DELETE
		// !running_four = DELETE
		// !running_full{}
		// !running_four{}
		// !running_full[*]{}
		// !running_four[*]{}
	// }
	// @EFFECTS
	// {
		// !running_full = DELETE
		// !running_four = DELETE
		// !running_full{}
		// !running_four{}
		// !running_full[*]{}
		// !running_four[*]{}
	// }
	
// }

@PART[engine_40HV]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@PLUME[Hydrolox-Upper]
	{
		@localPosition = 0,0,0.5
		@fixedScale = 0.7
	}
}


/// =================================================== S ================================================================================


@PART[engine_??SV]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@MODULE[ModuleEngine*]
	{
        @name = ModuleEnginesFX
        %powerEffectName = Solid-Upper
	}
	PLUME
    {
        name = Solid-Upper            //pre-fabbed plume you want
        transformName = thrustTransform //which transform to attach the plume
        localRotation = 0,0,0           //Optional - Any rotation needed
        localPosition = 0,0,0           //Any offset needed
        fixedScale = 1                  //Size adjustment to resize to engine
        energy = 1                      //Adjust length of plume
        speed = 1                       //Adjust speed to fit resize, 
                                        //generally close to 1:1 with scale.
    }
}
	
@PART[engine_??SA*]:FOR[SpaceRace]:NEEDS[RealPlume]
{
	@MODULE[ModuleEngine*]
	{
        @name = ModuleEnginesFX
        %powerEffectName = Solid-Lower
	}
	PLUME
    {
        name = Solid-Lower
        transformName = thrustTransform
        localRotation = 0,0,0
        localPosition = 0,0,0
        fixedScale = 1
        energy = 1
        speed = 1
    }
}

@PART[engine_05SA]:FOR[SpaceRace]:NEEDS[RealPlume]
{
}

@PART[engine_05SAL]:FOR[SpaceRace]:NEEDS[RealPlume]
{
}

@PART[engine_05SV]:FOR[SpaceRace]:NEEDS[RealPlume]
{
}

/////////////////////////////////////// size 1
@PART[engine_10SA]:FOR[SpaceRace]:NEEDS[RealPlume]
{
}

@PART[engine_10SAL]:FOR[SpaceRace]:NEEDS[RealPlume]
{
}


/////////////////////////////////////// size 1.5
@PART[engine_15SA]:FOR[SpaceRace]:NEEDS[RealPlume]
{
}

@PART[engine_15SAL]:FOR[SpaceRace]:NEEDS[RealPlume]
{
}

/////////////////////////////////////// size 2
@PART[engine_20SA]:FOR[SpaceRace]:NEEDS[RealPlume]
{
}

@PART[engine_20SAL]:FOR[SpaceRace]:NEEDS[RealPlume]
{
}

/////////////////////////////////////// size 3
@PART[engine_30SA]:FOR[SpaceRace]:NEEDS[RealPlume]
{
}

@PART[engine_30SAL]:FOR[SpaceRace]:NEEDS[RealPlume]
{
}

/////////////////////////////////////// size 4
// @PART[engine_40SA]:FOR[SpaceRace]:NEEDS[RealPlume]
// {
	// @cost = 45000
	// @mass = 80
	// %bulkheadProfiles = size1
	// @MODULE[ModuleEngine*]
	// {
		// @minThrust = 3500
		// @maxThrust = 4000
	// }
// }

// @PART[engine_40SAL]:FOR[SpaceRace]:NEEDS[RealPlume]
// {
	// @cost = 18000
	// @mass = 17
	// %bulkheadProfiles = size1
	// @MODULE[ModuleEngine*]
	// {
		// @minThrust = 440
		// @maxThrust = 880
	// }
// }
@PART[engine_??SV]:FOR[SpaceRace]:NEEDS[RealPlume]
{
}



////////////////////////////////// RCS ///////////////////////////////////////////////////////////////////////////////////////////////////

//TODO: a cooler way to change atmcurve than moduleupgrade?

//////T0
//RLA_rcs_micro
@PART[RLA_rcs_micro]
{
}

//////up1

//RCSBlock
@PART[RCSBlock]
{
}
//RLA_rcs_linear
@PART[RLA_rcs_linear]
{
}
//RLA_rcs_2way
@PART[RLA_rcs_2way]
{
}

//linearRcs
@PART[linearRcs]
{
}
//RLA_rcs_5way
@PART[RLA_rcs_5way]
{
}

//// TODO: aerospike (poor isp like hypergolic, poor restart, but ASL = ASL bell and Vac = Vac bell)

//// TODO: nuclear (make nuclear work with hydrolox, not only hydro)

@PART[nuclearEngine]
{
}

//// TODO: ion

